---
title: 3. dartä¸­çš„å¯¹è±¡ class mixins
meta: 
  - bgImage: http://pic.closeeyes.cn/fengjing5.jpg
tag: Dart
---

::: tip class

`dart` æ˜¯ä¸€é—¨ä½¿ç”¨ç±»å’Œå•ç»§æ‰¿é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ç±»çš„å®ä¾‹ï¼Œå¹¶ä¸”æ‰€æœ‰ç±»éƒ½æ˜¯`Object`çš„å­ç±»ã€‚
:::

### 1. é»˜è®¤æ„é€ å‡½æ•°  js ä¸­æ˜¯ `constructor`
```dart
class Person {
  Sting name;
  int age;

  // é»˜è®¤æ„é€ å‡½æ•° åŠæ—¶ class æœ¬èº« ç›´æ¥èµ‹å€¼ ç®€å†™
  Person(this.name, this.age)

  // ä¹Ÿå¯ä»¥è¿™æ ·å†™
  // Person(String name, int age) {
  //   this.name = name
  //   this.age = age
  // }
}

Person p1 = new Person('å“ˆå“ˆ', 18)

```

### 2. å‘½åæ„é€ å‡½æ•°
```dart
class Person {
  Sting name;
  int age;

  // å‘½åæ„é€ å‡½æ•° å¯ä»¥å†™ å¤šä¸ª
  Person.now(this.name, this.age)

  // Person.   .....
}

Person p1 = new Person.now('å“ˆå“ˆ', 18)

```

### 3. class é‡Œé¢çš„ ç§æœ‰å±æ€§å’Œæ–¹æ³•

- dart ä¸­çš„ç§æœ‰å±æ€§ ä¸€èˆ¬æ˜¯åœ¨å±æ€§åä¹‹å‰åŠ ä¸Šä¸€ä¸ª `_`, å¦‚æœå¼•ç”¨çš„çš„classåœ¨åŒä¸€ä¸ªæ–‡ä»¶å†…çš„ï¼Œå¹¶éæ˜¯é€šè¿‡`import`å¼•å…¥çš„class æ˜¯å¯ä»¥å–åˆ° ç§æœ‰å±æ€§çš„ï¼Œè¿™ç‚¹è¦æ³¨æ„ã€‚

```dart
class Person {
  // è¿™ä¸ªæ˜¯ä¸€ä¸ªç§æœ‰å±æ€§
  Sting _name;
  // å…±æœ‰å±æ€§
  int age;
}

```

- class ä¸­çš„  `get`å’Œ`set`

```dart

class Rect {
  // è¿™ä¸ªæ˜¯ä¸€ä¸ªç§æœ‰å±æ€§
  int width;
  // å…±æœ‰å±æ€§
  int height;

  Rect(this.width, this.height)

  get int getRect {
    return this.width * this.height;
  }

  set setWidth (int width) {
    this.width = width
  }
}

```

### Â 4. class ä¸­åˆ›å»ºé™æ€æ–¹æ³•ï¼Œå’Œé™æ€å±æ€§

- `static` å…³é”®å­— åˆ›å»ºé™æ€å±æ€§ å’Œ æ–¹æ³•
- é™æ€æ–¹æ³•ä¸èƒ½è®¿é—®éé™æ€æˆå‘˜ï¼Œéé™æ€æ–¹æ³•å¯ä»¥è®¿é—®é™æ€æˆå‘˜ã€‚

```dart

class Person {
  // è¿™ä¸ªæ˜¯ä¸€ä¸ªé™æ€å±æ€§
  static String name = 'å°ğŸ˜„';
  // å…±æœ‰å±æ€§
  int age;

  // éé™æ€æ–¹æ³•
  String getName () {
    return this.name
  }

  // è¿™ä¸ªæ˜¯é”™è¯¯çš„ è¿™ä¸ªæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³• å¦‚æœè®¿é—® this.age éé™æ€çš„å±æ€§ å°±ä¼šæŠ¥é”™ã€‚
  static getNameAndAge () {
    return '${this.age}__${this.name}'
  }
}

print(Person.name) // å°ğŸ˜„
```

### 5. å¯¹è±¡ä¸­çš„æ“ä½œç¬¦

  #### 1. æ¡ä»¶è¿ç®—ç¬¦ ï¼Ÿ

  ```dart

  // å£°æ˜ä¸€ä¸ª Person ç±»å‹çš„å˜é‡æœªå®šä¹‰
  Person p;

  print(p.name) // ä¼šæŠ¥é”™
  print(p?.name) // å½“på­˜åœ¨æ—¶ åœ¨å–name å±æ€§çš„å€¼

  ```

  #### 2. ç±»å‹è½¬åŒ– as

  ```dart

  class Person {
    String name = 'aa';
    int age;

    Person(this.age)

    void printInfo () {
      print('${this.age}')
    }
  }

  var p1 = new Person(20);
  // p1 è½¬åŒ–æˆäº† Person
  (p1 as Person).printInfo();

  ```


  #### 3. ç±»å‹åˆ¤æ–­ is

  - å·®ä¸å¤š å’Œ js ä¸­çš„`instanceof` ç±»è¯•, åˆ¤æ–­æ˜¯å¦æ˜¯ æŸä¸€ç±»å‹

  #### 4. çº§è”æ“ä½œ ..

  ```dart

  class Person {
    String name = 'aa';
    int age;

    Person(this.age)

    void printInfo () {
      print('${this.age}â€”â€”â€”â€”â€”â€”${this.name}')
    }
  }



  Person p1 = new Person(30);
  p1..name = 'ccc'
    ..age = 20
    ..printInfo();

  ```

### 6. ç±»çš„ç»§æ‰¿
- extends å…³é”®å­—å¯ä»¥å®ç°ç»§æ‰¿
```dart
class Person {
  String name;
  int age;
  // æ„é€ å‡½æ•°
  Person(this.name, this.age);

  // è‡ªå®šä¹‰æ–¹æ³•
  void eat () {}
}

class P1 extends Person {
  P1(String name, int age): super(name, age);

  // é‡å†™çˆ¶ç±»é‡Œé¢çš„æ–¹æ³• @override ä½œä¸ºæ ‡è¯†
  @override
  void eat () {}
}
```
- mixins ï¼ˆæ··å…¥ï¼‰ `with` å…³é”®å­—å®ç°å¤šç»§æ‰¿ï¼ˆå…¶å®ä¸æ˜¯ç»§æ‰¿ï¼Œä¹Ÿä¸æ˜¯æ¥å£ï¼Œæ˜¯ä¸€ç§å…¨æ–°çš„ç‰¹æ€§ã€‚ï¼‰

```dart
// dart2.X ä¸­ä½¿ç”¨çš„ä¸€äº›æ·»åŠ 
/*
  1. ä½œä¸º mixins çš„ç±»åªèƒ½ç»§æ‰¿è‡ªObject ä¸èƒ½ç»§æ‰¿è‡ªå…¶å®ƒç±» (å‡å¦‚è¯´ A è¿™ä¸ªç±»æ˜¯ç»§æ‰¿è‡ªå…¶å®ƒçš„ç±» class A extends OtherClass {} é‚£å°±æ˜¯è¯´ä¸èƒ½ä½œä¸º mixins ä½¿ç”¨ã€‚)
  2. ä¸èƒ½æœ‰æ„é€ å‡½æ•°ã€‚
  3. æ··å…¥mixins å¯ä»¥å¤šä¸ª mixins ç±»ã€‚
*/

class A {
  String name;
  // A(this.name); å¦‚æœå­˜åœ¨ æ„é€ å‡½æ•° ä¸èƒ½ä½œä¸º mixins
  func1 () {
    print('A::::::;');
  }
}

class B {
  func2 () {
    print('B::::::;');
  }
}

// é€šè¿‡ with å…³é”® å®ç°ç±»å¼çš„å¤šç»§æ‰¿
class C with A,B {}

void main() {
  C c = new C();
  c.func1();
  c.func2();
}
```